<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Machine Learning in the Browser</title>

    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Hakim El Hattab">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="reveal.js/css/reveal.css">
    <!--<link rel="stylesheet" href="reveal.js/css/theme/white.css" id="theme">-->
    <link rel="stylesheet" href="reveal.js/css/theme/night.css" id="theme">
    <!--<link rel="stylesheet" href="reveal.js/css/theme/black.css" id="theme">-->
    <!--<link rel="stylesheet" href="reveal.js/css/theme/night.css" id="theme">-->
    <!--<link rel="stylesheet" href="reveal.js/css/theme/simple.css" id="theme">-->


    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="reveal.js/lib/css/zenburn.css">
    <style>
        pre code {
            /*display: block;*/
            /*padding: 0.5em;*/
            /*background: #FFFFFF !important;*/
            /*color: #000000 !important;*/
            font-size: larger !important;
        }

        .right-img {
            margin-left: 10px !important;
            float: right;
            /*height: 500px;*/
        }
        .left-img {
            margin-left: 10px !important;
            float: left;
            /*height: 500px;*/
        }
        .todo:before {
            content: 'TODO: ';
        }
        .todo {
            color: red !important;
        }
        code span.line-number {
            color: lightcoral;
        }

    </style>

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!--[if lt IE 9]>
    <script src="reveal.js/lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">
    <div class="slides">

<!--
Titel: deeplearn.js - Warum der Browser und Machine Learning perfekt zusammen passen

Abstract: https://deeplearnjs.org/ ermöglicht Machine Learning im Stile von TensorFlow direkt im Browser. 
Dabei ist man nicht auf außerhalb des Browsers trainierte Modelle eingeschränkt, sondern kann diese selbst interaktiv im Browser trainieren. 
Dies funktioniert effizient, weil über WebGL jede GPU genutzt werden kann.

Damit können wir Machine Learning direkt mit den ganzen tollen Sachen kombinieren, die der Browser ohnehin mitbringt. 
Dadurch eröffnet sich eine völlig neue Welt an Anwendungen in den Bereichen Ausbildung, Deployment, Visualisierung und Entwicklung. 
Sogar eine Revolution im Bereich UX durch lernfähige Interfaces ist denkbar.

In diesem Talk werde ich in Kombination mit Canvas, Web Audio und Kamera-Input Beispiele für diese Bereiche zeigen. 
Ich führe dabei auch in die Programmierung von deeplearn ein, sodass du einen Startpunkt für eigene Experimente hast.
-->
        <section data-markdown class="preparation">
            <script type="text/template">
### Preparation
- Open all demos way ahead of time when there still is internet

- Open model.js and polynomial-regression-core/index.js in VSC
  - start ```http-server``` in terminal
  - Color Scheme: High Contrast
  - Zoom In
            </script>
        </section>

        <section>
                <h2>Educate, Visualize, Develop, Play, Deploy with tensforflow.js</h2>
                <h3>Why the Browser and Machine Learning are a perfect match</h3>
        <p><a target="_blank" href="https://www.enterjs.de/single?id=6445&deeplearn.js-%E2%80%93-warum-der-browser-und-machine-learning-perfekt-zusammen-passen">
            enterjs, Darmstadt 2018
        </a></p>
        <h4><a href="http://zeigermann.eu">Oliver Zeigermann</a> / <a href="http://twitter.com/djcordhose">@DJCordhose</a>
        </h4>
        <p><small><a href="http://bit.ly/enterjs-tensorflow-js">
            http://bit.ly/enterjs-tensorflow-js
        </a></small></p>
    </section>

        <section class="todo">
            <pre>
- node backend: https://twitter.com/nkreeger/status/988549533192765442
- Style transfer: https://twitter.com/zaidalyafeai/status/988898548170346496
- Mnist in Observable und erst ganz am Ende
- Kürzen von 60 auf 45 Minuten
- auf aktuellste Version updaten
            </pre>
        </section>

        <section>
            <img src="img/tensorflow_js.png">
            <p><a href="https://js.tensorflow.org/" target="_blank">https://js.tensorflow.org/</a></p>
        </section>

        <section>
                <h2>Wait, but why?</h2>
                    <div class="fragment">
                        <h3>Python is predominant in the area of Machine Learning</h3>
                        <ul>
                            <li>Has a large and mature set of libs
                            <li>Is reasonably fast
                            <li>Uses bindings to C/C++ or Fortran for speed and reuse
                        </ul>
                    </div>
            </section>
    
            <section>
                <h1>(I) Educate</h1>
                <p class="fragment">Everyone can be educated, they just need a browser and internet</p>
                <p class="fragment">Concepts are much easier to grok when you can play around with them</p>
            </section>
    
            <section>
                <h3>Experiment to explore how machine learning works</h3>
                <p>
                    <small>Built using deeplearn.js (predecessor of tensorflow.js)</small>
                </p>
                <div style="margin-top: -40px">
                    <a href="https://teachablemachine.withgoogle.com/" target="_blank">
                        <img src="img/browser/teachable-machine.png" height="350px">
                    </a>
                    <p>
                        <small>
                            <a href="https://teachablemachine.withgoogle.com/" target="_blank">https://teachablemachine.withgoogle.com/</a>
                        </small>
                    </p>
            </section>
            
            <section>
                <h3>Tensorflow Playground</h3>
                <p>Where it all started - Playing with Neural Networks without any installation</p>
                <a href="http://playground.tensorflow.org" target="_blank">
                    <img src="img/browser/playground.png">
                </a>
                <p><small><a href="http://playground.tensorflow.org" target="_blank">http://playground.tensorflow.org</a></small></p>
            </section>
    
            <section>
                    <h3>Training a network</h3>
                        <a target="_blank" href="https://deeplearnjs.org/demos/model-builder/">
                    <img src="img/deeplearn-model-builder.png" height="500px">
                    </a>
                <p>
                    <small>
                        <a target="_blank" href="https://deeplearnjs.org/demos/model-builder/">
                             https://deeplearnjs.org/demos/model-builder/</a>
                    </small>
                </p>
                </section>
            
            <section>
                <h1>(II) Develop</h1>
                <p class="fragment">Most obvious reason: JavaScript is the language you are most comfortable with</p>
                <p class="fragment">You just happen to develop for the browser</p>
                <p class="fragment">You are intrigued by how JavaScript development works</p>
                <p class="fragment">Combination with interactive visualizations and other browser features (like audio and video)</p>
            </section>
    
            <section>
                    <h3>Core Concepts</h3>
                <p>It's all about matrix operations</p>
                    <pre><code contenteditable data-trim class="fragment line-numbers javascript">
    const a = tf.tensor1d([1, 2, 3]);
    const b = tf.scalar(2);
    
    // a is not modified, result is a new tensor
    const result = a.add(b);
                    </code></pre>
                                        
                    <pre><code contenteditable data-trim class="fragment line-numbers javascript">
    const data = await result.data(); 
    console.log(data); // Float32Array([3, 4, 5]
                    </code>
                </pre>
                <!-- <p><a href="js/tensorflow-sandbox/minimal.html" target="_blank">Minimal Example</a></p> -->
                <p><a href="https://github.com/tensorflow/tfjs" target="_blank">https://github.com/tensorflow/tfjs</a></p>
                <p><a href="https://js.tensorflow.org/tutorials/core-concepts.html" target="_blank">
                    https://js.tensorflow.org/tutorials/core-concepts.html</a></p>
            </section>
        
                <section>
                <h3>Demo: Changing the Optimizer in a simple example</h3>
                <p>Getting an impression of how to code and how the turnaround cycle works</p>
                <p><a href="js/polynomial-regression-core/" target="_blank">Polynomial Regression Example</a></p>
            </section>
    
    <section data-markdown>
        <textarea data-template>
    ### Steps
    * Find API documentation about Optimizers: https://js.tensorflow.org/api/0.8.0/#Training-Optimizers
    * Changing to first https://js.tensorflow.org/api/0.8.0/#train.momentum and then https://js.tensorflow.org/api/0.8.0/#train.adam 
    </textarea>
    </section>
    
    <section>
            <h3>High Level Layer API</h3>
        <p>If you have ever seen Keras, you will feel right at home</p>
            <pre><code contenteditable data-trim class="fragment line-numbers javascript">
    const model = tf.sequential();
              </code></pre>
            <pre><code contenteditable data-trim class="fragment line-numbers javascript">
    model.add(tf.layers.dense({units: 10}));
              </code></pre>
                                
            <pre><code contenteditable data-trim class="fragment line-numbers javascript">
    model.add(tf.layers.conv2d({
      inputShape: [28, 28, 1],
      kernelSize: 5,
      filters: 8,
      activation: 'relu'
    }));
            </code>
        </pre>
    </section>
    <section data-markdown>
        <textarea data-template>
    ### Zero Installation
    
    <p>Experiments with state of the art neural networks with zero installation directly in JavaScript: <a href="js/mnist/model.js" target="_blank">
        model.js</a></p>
    
    <a href="js/mnist" target="_blank">
    <img src="img/tfjs/minst.png" height="350px">
    </a>
    <p><small><a href="js/mnist" target="_blank">
        https://djcordhose.github.io/ai/js/mnist</a></small></p>
    
    </textarea>
    </section>
            
            <section>
                <h1>(III) Play</h1>
                <p class="fragment">Browser games can benefit from Machine Learning</p>
            </section>
    
                <section data-markdown style="font-size: xx-large">
        <textarea data-template>
    ### Find Emojis in the real world
    
    Loads a MobileNet (Neural Network optimized for mobile devices) fully trained on all the Emojis
    
    <a href="https://emojiscavengerhunt.withgoogle.com/">
    <img src="img/tfjs/scavenger_hunt.png" height="350px">
    </a>
    
    https://github.com/google/emoji-scavenger-hunt
    https://js.tensorflow.org/tutorials/mnist.html
    
    </textarea>
    </section>
    
                <section data-markdown style="font-size: xx-large">
        <textarea data-template>
    ### Pacman using gesture control
    
    Loads a pretrained MobileNet and let's you refine it to your face (transfer learning) 
    
    <a href="https://storage.googleapis.com/tfjs-examples/webcam-transfer-learning/dist/index.html">
    <img src="img/tfjs/pacman.png" height="350px">
    </a>
    
    https://js.tensorflow.org/tutorials/webcam-transfer-learning.html
    
    </textarea>
    </section>
    
            <section>
                <h1>(IV) Deploy</h1>
                <p>JavaScript might be the only language around</p>
                <p class="fragment">because all you have is a browser</p>
    
                <ul class="fragment">
                    <li>you on your mobile phone
                    <li>AI in browser based game
                    <li>use any GPU
                </ul>
    
            </section>
    
    <section data-markdown>
        <textarea data-template>
    ### Going over WebGL to reach the GPU
    
    _We use fragment shaders to parallelize the tensor operations and use 2D color textures to store data. Operations trigger shader programs that run over textures and generate new textures (tensors)._
    
    @nsthorat via https://news.ycombinator.com/item?id=15856647
    </textarea>
    </section>
    
    <section data-markdown>
            <textarea data-template>
    <img src="img/tfjs/gtx_1060.png" height="500px">
    
    GPU usage when re-training for Pacman
        </textarea>
        </section>
        
    
    <section>
        <h3>Scenario: Train using beefey machine using raw TensorFlow, deploy to browser</h3>
    </section>
    
                    <section>
                        <h3>Customer Data - Car Insurance</h3>
                        <img src="img/insurance/automobile-insurance.png" height="400px">
                        <p>
                            <small>How would you rank me (47) for a car with 160 km/h top speed?</small>
                        </p>
                    </section>
    
    
    
    <section data-markdown>
        <textarea data-template>
    ### Approach
    * Train Tensorflow / Keras Modell 
    * Convert to tensorflow.js format
    * Load into browser
    * use in the same way as on server
    
    https://js.tensorflow.org/tutorials/import-keras.html
    </textarea>
    </section>
    
    
    
    <section>
            <h3>Using the fully trained modell in JavaScript</h3>
            <pre><code contenteditable data-trim class="fragment line-numbers javascript">
    const model = await tf.loadModel('model.json');
            </code></pre>
            <pre><code contenteditable data-trim class="fragment line-numbers javascript">
    // max speed, age, thousand kilometers per year
    const example = tf.tensor([[150, 45, 10]]);
    const prediction = model.predict(example);
                    </code></pre>
            <pre><code contenteditable data-trim class="fragment line-numbers javascript">
    const value = await prediction.data();
    // softmax 
    // # 0: red
    // # 1: green
    // # 2: yellow        
    console.log(value);
    // [0.0937359631061554, 
        0.7274655699729919, 
        0.17879831790924072]
    </code></pre>
    <p><a href='js/tensorflow-sandbox/load_model.html' target="_blank">https://djcordhose.github.io/ai/js/tensorflow-sandbox/load_model.html</a></small></p>
    </section>
    
    <section>
            <h3>A quick look at the original model</h3>
            <pre><code contenteditable data-trim class="fragment line-numbers python">
    inputs = tf.keras.Input(name='input', shape=(3, ))
            </code></pre>
            <pre><code contenteditable data-trim class="fragment line-numbers python">
    x = tf.keras.layers.Dense(100)(inputs)
    x = tf.keras.layers.Dense(100)(x)
            </code></pre>
            <pre><code contenteditable data-trim class="fragment line-numbers python">
    predictions = 
        tf.keras.layers.Dense(3, activation='softmax')(x)
    model = 
        tf.keras.models.Model(inputs=inputs, 
                              outputs=predictions)
            </code></pre>
            <pre><code contenteditable data-trim class="fragment line-numbers python">
    model.compile(optimizer='adam',
                  loss='categorical_crossentropy',
                  metrics=['accuracy'])
            </code></pre>
    <p>This is Python, but tensorflow.js code almost is indistinguishable</p>
                        </section>
    
    <section data-markdown>
            <textarea data-template>
    ### Deployment to observablehq
    
    <img src='img/tfjs/observablehq.png' height="400px">
    
    https://beta.observablehq.com/@nsthorat/introduction-to-deeplearn-js
    </textarea>
    </section>
            
    <section data-markdown>
            <textarea data-template>
### Performance CUDA

<img src='img/tfjs/tf_cuda.png' height="400px">

From: <a target="_blank" href="https://docs.google.com/presentation/d/1QsaLOsl82tQUDxkqbuVg3jS_NhFUkHnuagi8NpR66mM/edit#slide=id.g376d3e9012_0_725">
    TensorFlow.js from the #tfdevsummit
</a>
    </textarea>
    </section>
            
    <section data-markdown>
            <textarea data-template>
### Performance WebGL

<img src='img/tfjs/tf_webgl.png' height="400px">

From: <a target="_blank" href="https://docs.google.com/presentation/d/1QsaLOsl82tQUDxkqbuVg3jS_NhFUkHnuagi8NpR66mM/edit#slide=id.g376d3e9012_0_725">
    TensorFlow.js from the #tfdevsummit
</a>
    </textarea>
    </section>
    <section data-markdown>
            <textarea data-template>
### Overview

<img src='img/tfjs/tf_js_overview.png' height="400px">

From: <a target="_blank" href="https://docs.google.com/presentation/d/1QsaLOsl82tQUDxkqbuVg3jS_NhFUkHnuagi8NpR66mM/edit#slide=id.g376d3e9012_0_725">
    TensorFlow.js from the #tfdevsummit
</a>
    </textarea>
    </section>

    <section data-markdown class="todo">
            <textarea data-template>
### Mnist in Observable

    </textarea>
    </section>
        <section>
            <h3>Wrapping Up</h3>
            <p>tensorflow.js browser apps</p>
            <ul>
                <li>can make use of any GPU (not only CUDA)
                <li>have highest reach due to zero installation
                <li>can be easily integrated into existing Web Apps
                <li>allow for best visualization
                <li>are ideal for interactive learning
            </ul>
            <p><small>
                    Educate, Visualize, Develop, Play, Deploy with tensforflow.js, enterjs 2018
                <br>
            <a href="http://zeigermann.eu">Oliver Zeigermann</a> / <a href="http://twitter.com/djcordhose">@DJCordhose</a>
                <br>
            <a href="http://bit.ly/enterjs-tensorflow-js">
                http://bit.ly/enterjs-tensorflow-js
            </a>
            </small></p>
        </section>

    </div>

</div>

<script src="reveal.js/lib/js/head.min.js"></script>
<script src="reveal.js/js/reveal.js"></script>
<script src="lib/jquery-2.2.4.js"></script>

<script>
    $('section').attr('data-background-image', "backgrounds/blue-tile.jpg")
    // $('section').attr('data-background-image', "backgrounds/dark-blur.jpg")
//    $('section').attr('data-background-image', "backgrounds/tiles-raw.jpg")
//    $('section').attr('data-background-image', "backgrounds/white-transparent.jpg")
</script>
<script>
    if (window.location.hostname.indexOf('localhost') !== -1) {
    } else {
        // only applies to public version
        $('.preparation').remove();
    }
    Reveal.addEventListener( 'ready', function( event ) {
        if (window.location.hostname.indexOf('localhost') !== -1) {
            // only applies to presentation version
            Reveal.configure({ controls: false });
        } else {
            // only applies to public version
            $('.fragment').removeClass('fragment');
        }
        // applies to all versions
        $('code').addClass('line-numbers');
    } );
</script>

<script>

    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'fade', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
            {
                src: 'reveal.js/lib/js/classList.js', condition: function () {
                return !document.body.classList;
            }
            },
            {
                src: 'reveal.js/plugin/markdown/marked.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'reveal.js/plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'reveal.js/plugin/highlight/highlight.js', async: true, condition: function () {
                return !!document.querySelector('pre code');
            }, callback: function () {
                hljs.initHighlightingOnLoad();
            }
            },
            {src: 'reveal.js/plugin/zoom-js/zoom.js', async: true},
            {src: 'reveal.js/plugin/notes/notes.js', async: true},
            // https://github.com/mikemiles86/reveal-line-numbers
            {src: 'lib/js/line-numbers.js'}
        ]
    });

</script>

</body>
</html>
